{% extends 'seller_base.html' %}
 {% load static %}
{% block title %} Orders {% endblock title %}

{% block content %}

    <link rel="stylesheet" type="text/css" href="{% static 'css/view_cart.css' %}">
    <section>
        {% if message.success %}
            <div class="alert alert-success alert-dismissible">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                {{ message }}
            </div>
        {% endif %}
        <div class="container my-md-5 my-3">
            <ul class="nav nav-tabs nav-justified" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" href="#ordered" data-toggle="tab">
                        Ordered
                        <span class="badge badge-warning">{{ ordered_items.count }}</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#completed" data-toggle="tab">
                        Completed
                        <span class="badge badge-success badge-pill">{{ delivered_items.count }}</span>
                    </a>
                </li>
            </ul>
            <div class="tab-content">
                <div id="ordered" class="tab-pane active">
                    <table class="table table-bordered my-4">
                        <thead>
                            <tr>
                                <th>User Name</th>
                                <th>Email</th>
                                <th>Items</th>
                                <th>Cart Value in <i class="fa fa-inr my-0" aria-hidden="true"></i></th>
                                <th>Delivery Charges in <i class="fa fa-inr my-0" aria-hidden="true"></i></th>
                                <th>Ordered On</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in ordered_items %}
                                <tr>
                                    <td>{{ order.user }}</td>
                                    <td>{{ order.user.email }}</td>
                                    <td>{{ order.cartproduct_set.all.count }}</td>
                                    <td>{{ order.cart_value }}</td>
                                    <td>{% if order.delivery_charges == 0 %}FREE {% else %} {{ order.delivery_charges }}/- {% endif %}</td>
                                    <td>{{ order.ordered_on }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div id="completed" class="tab-pane fade">
                    <table class="table table-bordered my-4">
                        <thead>
                            <tr>
                                <th>User Name</th>
                                <th>Email</th>
                                <th>Items</th>
                                <th>Cart Value in <i class="fa fa-inr my-0" aria-hidden="true"></i></th>
                                <th>Delivery Charges in <i class="fa fa-inr my-0" aria-hidden="true"></i></th>
                                <th>Ordered On</th>
                                <th>Delivered On</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for order in delivered_items %}
                                <tr>
                                    <td>{{ order.user }}</td>
                                    <td>{{ order.user.email }}</td>
                                    <td>{{ order.cartproduct_set.all.count }}</td>
                                    <td>{{ order.cart_value }}</td>
                                    <td>{% if order.delivery_charges == 0 %}FREE {% else %} {{ order.delivery_charges }}/- {% endif %}</td>
                                    <td>{{ order.ordered_on }}</td>
                                    <td>{{ order.delivered_on }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}
